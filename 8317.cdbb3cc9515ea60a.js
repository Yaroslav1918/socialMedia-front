"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8317],{8317:(qe,w,d)=>{d.r(w),d.d(w,{HomePageModule:()=>ze});var p=d(177),s=d(8974),m=d(4341),h=d(6241),e=d(4438),x=d(467),l=d(6977),S=d(6354),g=d(6193),_=d(3397),y=d(3989),f=d(5312),U=d(1626);let b=(()=>{var i;class a{constructor(t){this.http=t}getFriendById(t){return this.http.get(`${f.c.baseApiUrl}/users/${t}`)}getAllFriends(){return this.http.get(`${f.c.baseApiUrl}/users/friends/all`)}searchFriendsByName(t){return this.http.post(`${f.c.baseApiUrl}/users/search`,{name:t})}sendFriendRequest(t){return this.http.post(`${f.c.baseApiUrl}/users/friend-request/${t}`,{})}getAllRequestsFriend(){return this.http.get(`${f.c.baseApiUrl}/users/friend-request/received-requests`)}updateRequestStatus(t,n){return this.http.put(`${f.c.baseApiUrl}/users/friend-request/status/${t}`,{status:n})}deleteFriend(t){return this.http.delete(`${f.c.baseApiUrl}/users/${t}`)}}return(i=a).\u0275fac=function(t){return new(t||i)(e.KVO(U.Qq))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),a})();const R=()=>["/home/feed"],z=()=>["/home/networks"],q=()=>["/home/chat"],H=()=>["/home/notifications"];let W=(()=>{var i;class a extends g.i{constructor(t,n,r,c){super(),this.authService=t,this.popoverController=n,this.chatService=r,this.friendService=c,this.imageUrl=null,this.unreadMessageCount=0,this.friendRequestCount=0,this.userId=0,this.fullName=""}ngOnInit(){this.authService.userId.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{null!==t&&(this.userId=t)}),this.authService.isUserLoggedIn.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{t&&this.authService.getUserImage().pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:n})=>{this.imageUrl=n})}),this.authService.userFullName.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.fullName=t}),this.chatService.getUnreadMessages().pipe((0,l.Q)(this.unsubscribe$),(0,S.T)(t=>t.filter(n=>!n.read).length)).subscribe(t=>{this.unreadMessageCount=t}),this.friendService.getAllRequestsFriend().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.friendRequestCount=t.filter(n=>"pending"===n.status&&n.creator.id!==this.userId).length})}onSignOut(){this.authService.logout(),this.dismissPopover()}presentPopover(t){var n=this;return(0,x.A)(function*(){const r=yield n.popoverController.create({component:a,cssClass:"popover-header",event:t,showBackdrop:!1,backdropDismiss:!0});yield r.present();const c=yield r.querySelector("ion-content");if(c){const u=c.querySelector("[tabindex], button, a, input");u&&u.focus()}})()}dismissPopover(){this.popoverController.dismiss().then(()=>{const t=document.getElementById("popover-trigger");t&&t.focus()})}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(_.u),e.rXU(s.IE),e.rXU(y.m),e.rXU(b))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-popover"]],features:[e.Vt3],decls:37,vars:14,consts:[[1,"ion-align-items-center","ion-justify-content-center"],["size","auto"],[3,"src"],["expand","block","size","small","fill","outline","color","primary",3,"routerLink"],[1,"item-divider"],[1,"ion-hide-md-up",2,"cursor","pointer",3,"click","routerLink"],["slot","start","name","home"],["slot","start","name","people"],["slot","start","name","chatbox-ellipses"],["color","danger",2,"height","19px","width","19px","border-radius","50%"],["slot","start","name","notifications"],[1,"sign-out",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-grid")(3,"ion-row",0)(4,"ion-col",1)(5,"ion-avatar"),e.nrm(6,"ion-img",2),e.k0s()(),e.j41(7,"ion-col")(8,"ion-card-title"),e.EFF(9),e.k0s()()()(),e.j41(10,"ion-button",3),e.EFF(11,"View Profile"),e.k0s()(),e.nrm(12,"div",4),e.j41(13,"ion-list")(14,"ion-item",5),e.bIt("click",function(){return n.dismissPopover()}),e.nrm(15,"ion-icon",6),e.j41(16,"ion-label"),e.EFF(17,"Home"),e.k0s()(),e.j41(18,"ion-item",5),e.bIt("click",function(){return n.dismissPopover()}),e.nrm(19,"ion-icon",7),e.j41(20,"ion-label"),e.EFF(21,"My Network"),e.k0s()(),e.j41(22,"ion-item",5),e.bIt("click",function(){return n.dismissPopover()}),e.nrm(23,"ion-icon",8),e.j41(24,"ion-label"),e.EFF(25,"Messaging "),e.j41(26,"ion-badge",9),e.EFF(27),e.k0s()()(),e.j41(28,"ion-item",5),e.bIt("click",function(){return n.dismissPopover()}),e.nrm(29,"ion-icon",10),e.j41(30,"ion-label"),e.EFF(31,"Notifications "),e.j41(32,"ion-badge",9),e.EFF(33),e.k0s()()()(),e.j41(34,"ion-card-content")(35,"p",11),e.bIt("click",function(){return n.onSignOut()}),e.EFF(36,"Sign Out"),e.k0s()()()),2&t&&(e.R7$(6),e.Y8G("src",n.imageUrl||"https://ionicframework.com/docs/img/demos/avatar.svg"),e.R7$(3),e.SpI("",n.fullName," "),e.R7$(),e.Y8G("routerLink",e.lJ4(9,R)),e.R7$(4),e.Y8G("routerLink",e.lJ4(10,R)),e.R7$(4),e.Y8G("routerLink",e.lJ4(11,z)),e.R7$(4),e.Y8G("routerLink",e.lJ4(12,q)),e.R7$(5),e.JRh(n.unreadMessageCount),e.R7$(),e.Y8G("routerLink",e.lJ4(13,H)),e.R7$(5),e.JRh(n.friendRequestCount))},dependencies:[s.mC,s.In,s.Jm,s.b_,s.I9,s.ME,s.tN,s.hU,s.lO,s.iq,s.KW,s.uz,s.he,s.nf,s.ln,s.N7,h.Wk],styles:[".item-divider[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-light-tint)}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}ion-card-title[_ngcontent-%COMP%]{font-size:17px}"]}),a})();var v=d(7673),G=d(9437),M=d(8790);function K(i,a){1&i&&(e.qex(0),e.EFF(1," \u2714 "),e.bVm())}function Z(i,a){1&i&&(e.qex(0),e.EFF(1," Connect "),e.bVm())}function ee(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-item"),e.EFF(1),e.j41(2,"ion-button",2),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.connectFriend(n.id))}),e.DNE(3,K,2,0,"ng-container",1)(4,Z,2,0,"ng-container",1),e.k0s()()}if(2&i){const o=a.$implicit,t=e.XpG();e.R7$(),e.Lme(" ",o.firstName," ",o.lastName," "),e.R7$(2),e.Y8G("ngIf",t.isConnected(o.id)),e.R7$(),e.Y8G("ngIf",!t.isConnected(o.id))}}function te(i,a){1&i&&(e.j41(0,"ion-item"),e.EFF(1," No friends found. "),e.k0s())}let ne=(()=>{var i;class a extends g.i{constructor(t,n,r){super(),this.friendService=t,this.toastService=n,this.popoverController=r,this.searchQuery="",this.connectedFriends=new Set,this.friends$=(0,v.of)([])}ngOnChanges(t){t.searchQuery&&this.searchQuery&&(this.friends$=this.friendService.searchFriendsByName(this.searchQuery))}connectFriend(t){this.friendService.sendFriendRequest(t).pipe((0,l.Q)(this.unsubscribe$),(0,G.W)(({error:n})=>(this.toastService.presentToast(n.message),(0,v.of)({error:!0})))).subscribe(()=>{this.connectedFriends.add(t),setTimeout(()=>{this.popoverController.dismiss()},1e3)})}isConnected(t){return this.connectedFriends.has(t)}ngOnInit(){}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(b),e.rXU(M.f),e.rXU(s.IE))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-friends-list"]],inputs:{searchQuery:"searchQuery"},features:[e.Vt3,e.OA$],decls:5,vars:6,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["slot","end","color","primary","fill","outline",1,"connect-button",3,"click"]],template:function(t,n){if(1&t&&(e.j41(0,"ion-list"),e.DNE(1,ee,5,4,"ion-item",0),e.nI1(2,"async"),e.DNE(3,te,2,0,"ion-item",1),e.nI1(4,"async"),e.k0s()),2&t){let r;e.R7$(),e.Y8G("ngForOf",e.bMT(2,2,n.friends$)),e.R7$(2),e.Y8G("ngIf",0===(null==(r=e.bMT(4,4,n.friends$))?null:r.length))}},dependencies:[p.Sq,p.bT,s.Jm,s.uz,s.nf,p.Jj],styles:[".connect-button[_ngcontent-%COMP%]{--border-color: rgb(69, 69, 246);--border-width: 2px;--color: rgb(74, 74, 240);--padding: .5em 1em}"]}),a})();const ie=["popover"],N=()=>["/home/feed"],oe=()=>["/home/networks"],se=()=>["/home/chat"],re=()=>["/home/notifications"],ae=()=>["/"],ce=()=>["/auth/join"],le=()=>["/auth/login"];function de(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-toolbar")(1,"div",4)(2,"ion-buttons",5)(3,"ion-button",6),e.nrm(4,"ion-icon",7),e.k0s()(),e.j41(5,"ion-searchbar",8),e.bIt("ionInput",function(n){e.eBV(o);const r=e.XpG();return e.Njj(r.searchFriends(n))}),e.k0s(),e.j41(6,"ion-grid")(7,"ion-row",9)(8,"ion-col",10),e.nrm(9,"ion-icon",11),e.j41(10,"div"),e.EFF(11,"Home"),e.k0s()(),e.j41(12,"ion-col",10),e.nrm(13,"ion-icon",12),e.j41(14,"div"),e.EFF(15,"My network"),e.k0s()(),e.j41(16,"ion-col",10),e.nrm(17,"ion-icon",13),e.j41(18,"ion-badge",14),e.EFF(19),e.k0s(),e.j41(20,"div"),e.EFF(21,"Messaging"),e.k0s()(),e.j41(22,"ion-col",10),e.nrm(23,"ion-icon",15),e.j41(24,"ion-badge",14),e.EFF(25),e.k0s(),e.j41(26,"div"),e.EFF(27,"Notifications"),e.k0s()(),e.j41(28,"ion-col",16),e.bIt("click",function(n){e.eBV(o);const r=e.XpG();return e.Njj(r.presentPopover(n))}),e.j41(29,"ion-avatar"),e.nrm(30,"ion-img",17),e.k0s(),e.j41(31,"div",18),e.EFF(32," Me "),e.nrm(33,"ion-icon",19),e.k0s()()()()()()}if(2&i){const o=e.XpG();e.R7$(3),e.Y8G("routerLink",e.lJ4(8,N)),e.R7$(5),e.Y8G("routerLink",e.lJ4(9,N)),e.R7$(4),e.Y8G("routerLink",e.lJ4(10,oe)),e.R7$(4),e.Y8G("routerLink",e.lJ4(11,se)),e.R7$(3),e.JRh(o.unreadMessageCount),e.R7$(3),e.Y8G("routerLink",e.lJ4(12,re)),e.R7$(3),e.JRh(o.friendRequestCount),e.R7$(5),e.Y8G("src",o.imageUrl||"https://ionicframework.com/docs/img/demos/avatar.svg")}}function pe(i,a){1&i&&(e.j41(0,"ion-toolbar")(1,"div",20)(2,"div",21)(3,"ion-buttons",5)(4,"ion-button",22)(5,"ion-text",23),e.EFF(6,"Linked"),e.k0s(),e.nrm(7,"ion-icon",24),e.k0s()()(),e.j41(8,"ion-list",25)(9,"ion-item")(10,"ion-buttons")(11,"ion-button",26),e.EFF(12,"Join now"),e.k0s(),e.j41(13,"ion-button",27),e.EFF(14,"Sign In"),e.k0s()()()()()()),2&i&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(3,ae)),e.R7$(7),e.Y8G("routerLink",e.lJ4(4,ce)),e.R7$(2),e.Y8G("routerLink",e.lJ4(5,le)))}function ue(i,a){if(1&i&&e.nrm(0,"app-friends-list",28),2&i){const o=e.XpG();e.Y8G("searchQuery",o.searchQuery)}}let me=(()=>{var i;class a extends g.i{constructor(t,n,r,c){super(),this.popoverController=t,this.authService=n,this.chatService=r,this.friendService=c,this.imageUrl=null,this.friendRequestCount=0,this.unreadMessageCount=0,this.userId=0,this.searchQuery="",this.isOpen=!1}ngOnInit(){this.authService.userId.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{null!==t&&(this.userId=t)}),this.authService.isUserLoggedIn.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{t&&(this.authService.userFullImagePath.pipe((0,l.Q)(this.unsubscribe$)).subscribe(n=>{this.imageUrl=n}),this.chatService.getUnreadMessages().pipe((0,l.Q)(this.unsubscribe$),(0,S.T)(n=>n.filter(r=>!r.read).length)).subscribe(n=>{this.unreadMessageCount=n}),this.friendService.getAllRequestsFriend().pipe((0,l.Q)(this.unsubscribe$)).subscribe(n=>{this.friendRequestCount=n.filter(r=>"pending"===r.status&&r.creator.id!==this.userId).length}))})}presentFriendsPopover(t){this.popover.event=t,this.isOpen=!0}presentPopover(t){var n=this;return(0,x.A)(function*(){yield(yield n.popoverController.create({component:W,cssClass:"popover-header",event:t,showBackdrop:!1})).present()})()}searchFriends(t){const n=t.target.value;this.searchQuery=n,n&&this.presentFriendsPopover(t),this.friendService.searchFriendsByName(n).pipe((0,l.Q)(this.unsubscribe$)).subscribe()}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(s.IE),e.rXU(_.u),e.rXU(y.m),e.rXU(b))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-header"]],viewQuery:function(t,n){if(1&t&&e.GBs(ie,5),2&t){let r;e.mGM(r=e.lsd())&&(n.popover=r.first)}},features:[e.Vt3],decls:9,vars:7,consts:[["popover",""],[1,"ion-container"],[4,"ngIf"],[3,"didDismiss","isOpen"],[1,"toolbar-box"],["slot","start",1,"ion-no-padding"],[3,"routerLink"],["color","secondary","name","logo-linkedin"],["placeholder","Search friends...","color","tertiary","debounce","1000",2,"width","250px",3,"ionInput"],[1,"ion-justify-content-end"],["size","auto",1,"ion-hide-md-down",2,"cursor","pointer",3,"routerLink"],["name","home"],["name","people"],["name","chatbox-ellipses"],["color","danger",2,"position","absolute","margin-left","-10px","margin-top","-5px","height","16px","width","16px","border-radius","50%"],["name","notifications"],["size","auto",1,"popover-menu",2,"cursor","pointer",3,"click"],[3,"src"],[2,"display","flex","justify-content","center","align-items","center"],["name","caret-down-outline",2,"font-size","16px"],[1,"toolbar-box-isNotLoggedIn"],[1,"title-container"],[2,"cursor","pointer",3,"routerLink"],["color","primary",1,"linkedin-text"],["color","primary","name","logo-linkedin",1,"linkedin-logo"],[1,"auth-buttonList"],["slot","start",1,"auth-button",3,"routerLink"],["slot","end",1,"auth-button",3,"routerLink"],[3,"searchQuery"]],template:function(t,n){if(1&t){const r=e.RV6();e.j41(0,"ion-header",1),e.DNE(1,de,34,13,"ion-toolbar",2),e.nI1(2,"async"),e.DNE(3,pe,15,6,"ion-toolbar",2),e.nI1(4,"async"),e.j41(5,"div")(6,"ion-popover",3,0),e.bIt("didDismiss",function(){return e.eBV(r),e.Njj(n.isOpen=!1)}),e.DNE(8,ue,1,1,"ng-template"),e.k0s()()()}2&t&&(e.R7$(),e.Y8G("ngIf",!0===e.bMT(2,3,n.authService.isUserLoggedIn)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(4,5,n.authService.isUserLoggedIn)),e.R7$(3),e.Y8G("isOpen",n.isOpen))},dependencies:[p.bT,s.mC,s.In,s.Jm,s.QW,s.hU,s.lO,s.eU,s.iq,s.KW,s.uz,s.nf,s.ln,s.S1,s.IO,s.ai,s.CF,s.Gw,s.N7,h.Wk,ne,p.Jj],styles:[".toolbar-box[_ngcontent-%COMP%]{display:flex;margin:auto;max-width:1200px}.toolbar-box-isNotLoggedIn[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:auto;max-width:1200px}ion-searchbar[_ngcontent-%COMP%]{--box-shadow: none;transform:scale(.8);margin-left:-20px}ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], ion-badge[_ngcontent-%COMP%]{font-size:12px;font-weight:400}ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-col[_ngcontent-%COMP%]{width:80px!important;text-align:center}ion-avatar[_ngcontent-%COMP%]{width:29px;height:29px;margin:auto}ion-list[_ngcontent-%COMP%]{display:flex;padding:0}.auth-button[_ngcontent-%COMP%]{background-color:none;border:none;border-radius:24px;padding:8px}.auth-button[_ngcontent-%COMP%]:nth-child(2){border:1px solid #0a66c2}.auth-button[_ngcontent-%COMP%]:hover{background-color:#cae2fa}.auth-buttonList[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 0;--border-color: transparent}"]}),a})(),he=(()=>{var i;class a{constructor(){}}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-home"]],decls:2,vars:0,template:function(t,n){1&t&&e.nrm(0,"app-header")(1,"ion-router-outlet")},dependencies:[s.Rg,me],styles:["[_nghost-%COMP%]{justify-content:start}.container[_ngcontent-%COMP%]{display:flex;width:1200px;margin:40px auto 0}@media (max-width: 1200px){.container[_ngcontent-%COMP%]{width:auto;justify-content:center}}ion-modal[_ngcontent-%COMP%]{--height: 50%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}@media (max-width: 768px){ion-modal[_ngcontent-%COMP%]{--width: calc(100% - 40px) ;--margin-left: 20px;--margin-right: 20px}}.title-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.title-container[_ngcontent-%COMP%]   .linkedin-logo[_ngcontent-%COMP%]{font-size:37px}.linkedin-text[_ngcontent-%COMP%]{font-size:27px;font-weight:700;text-transform:lowercase}.linkedin-text[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.content-container[_ngcontent-%COMP%]{display:flex;width:1128px;max-width:100%;justify-content:center;margin:90px auto 0}@media (max-width: 1200px){.content-container[_ngcontent-%COMP%]{flex-direction:column;width:auto}}.popover[_ngcontent-%COMP%]{margin-top:70px;width:300px;background:#f8f8f8;border-radius:12px;box-shadow:0 4px 8px #0003}.popover-header[_ngcontent-%COMP%]   .popover-content[_ngcontent-%COMP%]{width:300px;margin-top:16px;--box-shadow: none;--background: none}"]}),a})();const fe=["form"];let E=(()=>{var i;class a extends g.i{constructor(t,n){super(),this.modalController=t,this.authService=n}ngOnInit(){this.authService.userFullImagePath.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.imageUrl=t})}onDismiss(){this.modalController.dismiss(null,"dismiss")}onSubmit(){this.form.valid&&this.modalController.dismiss({post:{body:this.form.value.body}},"post")}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(s.W3),e.rXU(_.u))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-modal"]],viewQuery:function(t,n){if(1&t&&e.GBs(fe,5),2&t){let r;e.mGM(r=e.lsd())&&(n.form=r.first)}},features:[e.Vt3],decls:19,vars:2,consts:[["form","ngForm"],[3,"src"],[1,"ion-padding",3,"ngSubmit"],["rows","2","placeholder","What do you want to talk about?","type","text","ngModel","","name","body","required",""],["fill","clear"],[1,"action-items"],["size","small","shape","round","color","dark","fill","clear"],["slot","icon-only","name","add",1,"ion-padding-none"],["slot","icon-only","name","image-outline",1,"ion-padding-none"],["slot","icon-only","name","play-sharp",1,"ion-padding-none"],["slot","icon-only","name","calendar-outline",1,"ion-padding-none"],["type","submit",1,"ion-margin",3,"disabled"]],template:function(t,n){if(1&t){const r=e.RV6();e.j41(0,"ion-avatar"),e.nrm(1,"ion-img",1),e.k0s(),e.j41(2,"form",2,0),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(n.onSubmit())}),e.nrm(4,"ion-textarea",3),e.j41(5,"ion-button",4),e.EFF(6,"Add hashtag"),e.k0s(),e.j41(7,"div",5)(8,"div")(9,"ion-button",6),e.nrm(10,"ion-icon",7),e.k0s(),e.j41(11,"ion-button",6),e.nrm(12,"ion-icon",8),e.k0s(),e.j41(13,"ion-button",6),e.nrm(14,"ion-icon",9),e.k0s(),e.j41(15,"ion-button",6),e.nrm(16,"ion-icon",10),e.k0s()(),e.j41(17,"ion-button",11),e.EFF(18,"Post"),e.k0s()()()}if(2&t){const r=e.sdS(3);e.R7$(),e.Y8G("src",n.imageUrl||"https://ionicframework.com/docs/img/demos/avatar.svg"),e.R7$(16),e.Y8G("disabled",!r.valid)}},dependencies:[m.qT,m.BC,m.cb,m.YS,m.vS,m.cV,s.mC,s.Jm,s.iq,s.KW,s.nc,s.Gw],styles:["ion-img[_ngcontent-%COMP%]{width:60px;height:60px;margin-left:30px;margin-top:30px}ion-textarea[_ngcontent-%COMP%]{margin-top:20px}"]}),a})(),ge=(()=>{var i;class a extends g.i{constructor(t,n){super(),this.modalController=t,this.authService=n,this.create=new e.bkB,this.imageUrl=null,this.fullName="",this.canEmitCreate=!0}ngOnInit(){this.authService.userFullImagePath.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.imageUrl=t})}openModal(){var t=this;return(0,x.A)(function*(){const n=yield t.modalController.create({component:E,cssClass:"modal"});yield n.present();const{data:r}=yield n.onDidDismiss();r&&t.create.emit(r.post.body)})()}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(s.W3),e.rXU(_.u))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-post"]],outputs:{create:"create"},features:[e.Vt3],decls:24,vars:1,consts:[[3,"src"],["id","open-modal","expand","block","shape","round","fill","outline","color","medium",3,"click"],[1,"ion-text-left"],[1,"ion-hide-sm-down"],["color","medium","fill","clear"],["color","secondary","name","image-outline"],["color","success","name","play-sharp"],["color","warning","name","calendar-outline"],["color","danger","name","newspaper-outline"]],template:function(t,n){1&t&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-avatar"),e.nrm(3,"ion-img",0),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return n.openModal()}),e.j41(5,"span",2),e.EFF(6,"Start a post"),e.k0s()()(),e.j41(7,"ion-card-content",3)(8,"ion-button",4),e.nrm(9,"ion-icon",5),e.j41(10,"ion-text"),e.EFF(11,"Photo"),e.k0s()(),e.j41(12,"ion-button",4),e.nrm(13,"ion-icon",6),e.j41(14,"ion-text"),e.EFF(15,"Video"),e.k0s()(),e.j41(16,"ion-button",4),e.nrm(17,"ion-icon",7),e.j41(18,"ion-text"),e.EFF(19,"Event"),e.k0s()(),e.j41(20,"ion-button",4),e.nrm(21,"ion-icon",8),e.j41(22,"ion-text"),e.EFF(23,"Write article"),e.k0s()()()()),2&t&&(e.R7$(3),e.Y8G("src",n.imageUrl||"https://ionicframework.com/docs/img/demos/avatar.svg"))},dependencies:[s.mC,s.Jm,s.b_,s.I9,s.ME,s.iq,s.KW,s.IO],styles:["ion-card[_ngcontent-%COMP%]{width:525px;box-shadow:none;border:1px solid #e1e1e1;margin:10px 0 0}@media (max-width: 1200px){ion-card[_ngcontent-%COMP%]{width:100%}}ion-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}ion-avatar[_ngcontent-%COMP%]{width:48px;height:48px}ion-card-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-width: 1px;height:48px;width:100%;margin-left:16px}span.ion-text-left[_ngcontent-%COMP%]{margin-right:auto}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ion-card-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}"]}),a})(),F=(()=>{var i;class a{constructor(){}ngOnInit(){}}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-advertising"]],decls:26,vars:0,consts:[["src","https://www.pagetraffic.com/blog/wp-content/uploads/2022/08/types-of-propaganda-techniques.jpg"],["name","information"],["color","dark"],[1,"first-course"],["color","medium","size","small","fill","clear"],["color","dark","name","arrow-forward-outline",1,"ion-padding"]],template:function(t,n){1&t&&(e.j41(0,"ion-card")(1,"ion-card-header"),e.nrm(2,"ion-img",0),e.j41(3,"ion-text")(4,"h5"),e.EFF(5,"Today's most viewed courses"),e.k0s(),e.nrm(6,"ion-icon",1),e.k0s()(),e.j41(7,"ion-card-content")(8,"ion-text",2)(9,"h6",3),e.EFF(10,"1. High Performance Habits"),e.k0s()(),e.j41(11,"p"),e.EFF(12,"John Doe | Entrepreneur"),e.k0s(),e.j41(13,"ion-text",2)(14,"h6"),e.EFF(15,"2. Leadership 101"),e.k0s()(),e.j41(16,"p"),e.EFF(17,"Jane Smith | Leader"),e.k0s(),e.j41(18,"ion-text",2)(19,"h6"),e.EFF(20,"3. Psychology of Success"),e.k0s()(),e.j41(21,"p"),e.EFF(22,"Home Thomas | Psychologist"),e.k0s(),e.j41(23,"ion-button",4),e.EFF(24,"View all recommendations "),e.nrm(25,"ion-icon",5),e.k0s()()())},dependencies:[s.Jm,s.b_,s.I9,s.ME,s.iq,s.KW,s.IO],styles:["ion-card[_ngcontent-%COMP%]{width:315px;box-shadow:none;border:1px solid #e1e1e1}ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}ion-card-header[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px}ion-card-header[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{background-color:var(--ion-color-medium-shade);color:var(--ion-color-dark-contrast);border-radius:4px}ion-card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-top:0}ion-card-content[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:not(.first-course){margin-top:8px}ion-card-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:500}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:16px}"]}),a})();var I=d(4412),T=d(5519);function _e(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-avatar",5),e.bIt("click",function(){e.eBV(o),e.XpG();const n=e.sdS(3);return e.Njj(n.click())}),e.nrm(1,"img",6),e.k0s()}if(2&i){const o=e.XpG();e.R7$(),e.Y8G("src",o.imageUrl||"https://ionicframework.com/docs/img/demos/card-media.png",e.B4B)}}function be(i,a){if(1&i&&(e.j41(0,"ion-avatar"),e.nrm(1,"img",6),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("src",o.imageUrl||"https://ionicframework.com/docs/img/demos/card-media.png",e.B4B)}}function ve(i,a){if(1&i&&(e.j41(0,"ion-card-content"),e.EFF(1),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.SpI(" Your connection: ",o.numberOfFriends," ")}}let O=(()=>{var i;class a extends g.i{constructor(t,n,r,c){super(),this.authService=t,this.friendService=n,this.route=r,this.toastService=c,this.user=null,this.fileName="",this.fullName="",this.fullName$=new I.t(""),this.imageUrl="",this.numberOfFriends=0,this.friendId=0}ngOnChanges(t){t.user&&t.user.currentValue&&this.loadUserImage()}ngOnInit(){this.friendId=+this.route.snapshot.paramMap.get("id"),this.friendId?this.friendService.getFriendById(this.friendId).pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.fullName=t.firstName+" "+t.lastName}):this.authService.userFullName.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.user?this.fullName=this.user.firstName+" "+this.user.lastName:(this.fullName=t,this.fullName$.next(t))}),this.friendService.getAllFriends().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.numberOfFriends=t.length}),this.loadUserImage()}loadUserImage(){this.friendId?this.authService.getUserImage(this.friendId).pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:t})=>{this.imageUrl=t}):this.user?this.authService.getUserImage(this.user.id).pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:t})=>{this.imageUrl=t}):this.authService.getUserImage().pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:t})=>{this.imageUrl=t})}onFileSelect(t){var n=this;const r=t.target;if(r.files&&r.files.length>0){const c=r.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(c.type))return void this.toastService.presentToast("Only JPEG, JPG, and PNG image formats are allowed.");this.fileName=c.name;const P=new FormData;P.append("file",c),this.authService.uploadUserImage(P).pipe((0,l.Q)(this.unsubscribe$)).subscribe(function(){var j=(0,x.A)(function*({imageUrl:$}){n.imageUrl=$;const Q=yield T.w.get({key:"user"}),D=Q.value?JSON.parse(Q.value):null;if(D){const J={...D,imagePath:$};yield T.w.set({key:"user",value:JSON.stringify(J)}),n.authService.user$.next(J)}});return function($){return j.apply(this,arguments)}}())}}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(_.u),e.rXU(b),e.rXU(h.nX),e.rXU(M.f))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-profile"]],inputs:{user:"user"},features:[e.Vt3,e.OA$],decls:10,vars:4,consts:[["fileUpload",""],[1,"backdrop"],["type","file",2,"display","none",3,"change"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["alt","Avatar",3,"src"]],template:function(t,n){if(1&t){const r=e.RV6();e.j41(0,"ion-card")(1,"div",1)(2,"input",2,0),e.bIt("change",function(u){return e.eBV(r),e.Njj(n.onFileSelect(u))}),e.k0s(),e.DNE(4,_e,2,1,"ion-avatar",3)(5,be,2,1,"ion-avatar",4),e.k0s(),e.j41(6,"ion-card-header")(7,"ion-card-title"),e.EFF(8),e.k0s()(),e.DNE(9,ve,2,1,"ion-card-content",4),e.k0s()}2&t&&(e.R7$(4),e.Y8G("ngIf",!n.user),e.R7$(),e.Y8G("ngIf",n.user),e.R7$(3),e.JRh(n.fullName),e.R7$(),e.Y8G("ngIf",!n.user))},dependencies:[p.bT,s.mC,s.b_,s.I9,s.ME,s.tN],styles:["ion-card[_ngcontent-%COMP%]{width:230px;box-shadow:none;border:1px solid #e1e1e1}@media (max-width: 1200px){ion-card[_ngcontent-%COMP%]{width:100%;margin:0}}ion-avatar[_ngcontent-%COMP%]{display:block;margin:auto;width:80px;height:80px;padding:5px;cursor:pointer}.backdrop[_ngcontent-%COMP%]{height:84px;display:flex;background-color:#bcd4e4}ion-card-title[_ngcontent-%COMP%]{text-align:center}ion-card-content[_ngcontent-%COMP%]{text-align:center}"]}),a})();var L=d(8141),k=d(6697);let V=(()=>{var i;class a{constructor(t){this.http=t}createPost(t){return this.http.post(`${f.c.baseApiUrl}/posts`,{body:t}).pipe((0,k.s)(1))}getAllPosts(t){return this.http.get(`${f.c.baseApiUrl}/posts${t}`)}getAllPostsByFriendId(t,n=5,r=0){return this.http.get(`${f.c.baseApiUrl}/posts/${t}?take=${n}&skip=${r}`)}updatePost(t,n){return this.http.put(`${f.c.baseApiUrl}/posts/${n}`,{body:t}).pipe((0,k.s)(1))}deletePost(t){return this.http.delete(`${f.c.baseApiUrl}/posts/${t}`).pipe((0,k.s)(1))}}return(i=a).\u0275fac=function(t){return new(t||i)(e.KVO(U.Qq))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),a})();function Ce(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"div",3)(3,"ion-avatar"),e.nrm(4,"img",4),e.k0s()(),e.j41(5,"ion-list",5)(6,"ion-item")(7,"ion-icon",6),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.updatePost(n.id,n.body))}),e.k0s()(),e.j41(8,"ion-item")(9,"ion-icon",7),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.deletePost(n.id))}),e.k0s()()()(),e.j41(10,"p",8),e.EFF(11),e.k0s(),e.j41(12,"ion-list",9)(13,"ion-item")(14,"ion-button",10),e.nrm(15,"ion-icon",11),e.j41(16,"ion-text",12),e.EFF(17,"Like"),e.k0s()()(),e.j41(18,"ion-item")(19,"ion-button",10),e.nrm(20,"ion-icon",13),e.j41(21,"ion-text",12),e.EFF(22,"Comment"),e.k0s()()(),e.j41(23,"ion-item")(24,"ion-button",10),e.nrm(25,"ion-icon",14),e.j41(26,"ion-text",12),e.EFF(27,"Share"),e.k0s()()(),e.j41(28,"ion-item")(29,"ion-button",10),e.nrm(30,"ion-icon",15),e.j41(31,"ion-text",12),e.EFF(32,"Send"),e.k0s()()()()()}if(2&i){const o=a.$implicit;e.R7$(4),e.Y8G("src",o.author.imagePath||"https://ionicframework.com/docs/img/demos/avatar.svg",e.B4B),e.R7$(7),e.JRh(o.body)}}let X=(()=>{var i;class a extends g.i{constructor(t,n,r,c){super(),this.postService=t,this.authService=n,this.modalController=r,this.toastService=c,this.posts=[],this.user=null,this.numberOfPosts=5,this.skipPosts=0,this.userId$=new I.t(null)}ngOnInit(){this.getPosts(!1),this.authService.userId.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.userId$.next(t)}),this.authService.isTokenInStorage().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{t&&this.authService.getUserImage().pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:n})=>{this.imageUrl=n})})}ngOnChanges(t){if(t.userId){const n=t.userId;this.queryParams=`?take=${this.numberOfPosts}&skip=${this.skipPosts}`,n.currentValue&&this.postService.getAllPosts(this.queryParams).pipe((0,l.Q)(this.unsubscribe$)).subscribe(r=>{for(let c=0;c<r.length;c++)this.posts.push(r[c]);this.skipPosts+=this.numberOfPosts})}if(!this.userId){const n=t.postBody.currentValue;if(!n)return;this.postService.createPost(n).pipe((0,l.Q)(this.unsubscribe$)).subscribe(r=>{this.posts.unshift(r)})}}getPosts(t,n){this.queryParams=`?take=${this.numberOfPosts}&skip=${this.skipPosts}`,this.postService.getAllPosts(this.queryParams).pipe((0,l.Q)(this.unsubscribe$)).subscribe(r=>{(0===r.length||r.length<this.numberOfPosts)&&n&&(n.target.disabled=!0);for(let c=0;c<r.length;c++)this.posts.push(r[c]);t&&(null==n||n.target.complete()),this.skipPosts+=this.numberOfPosts})}onIonInfinite(t){this.getPosts(!0,t)}updatePost(t,n){var r=this;return(0,x.A)(function*(){const c=yield r.modalController.create({component:E,cssClass:"modal"});yield c.present();const{data:u}=yield c.onDidDismiss();u&&r.postService.updatePost(u.post.body,t).pipe((0,l.Q)(r.unsubscribe$)).subscribe(()=>{const P=r.posts.findIndex(j=>j.id===t);-1!==P&&(r.posts[P].body=u.post.body)})})()}deletePost(t){this.postService.deletePost(t).pipe((0,l.Q)(this.unsubscribe$),(0,L.M)(()=>{this.posts=this.posts.filter(n=>n.id!==t)}),(0,G.W)(({error:n})=>(this.toastService.presentToast(n.message),(0,v.of)({error:!0})))).subscribe()}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(V),e.rXU(_.u),e.rXU(s.W3),e.rXU(M.f))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-all-posts"]],inputs:{postBody:"postBody",userId:"userId"},features:[e.Vt3,e.OA$],decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingText","Loading more data...","loadingSpinner","bubbles"],[1,"avatar-container"],["alt","Silhouette of a person's head",3,"src"],[1,"button-list"],["color","dark","name","create-outline",2,"font-size","18px","cursor","pointer",3,"click"],["color","danger","name","trash-outline",2,"font-size","18px","cursor","pointer",3,"click"],[1,"post-body"],[1,"post-list"],["color","medium","fill","clear"],["name","thumbs-up-outline"],[1,"ion-hide-md-down"],["name","chatbox-ellipses-outline"],["name","arrow-redo-outline"],["name","paper-plane-outline"]],template:function(t,n){1&t&&(e.j41(0,"ion-content")(1,"ion-list"),e.DNE(2,Ce,33,2,"ion-card",0),e.k0s(),e.j41(3,"ion-infinite-scroll",1),e.bIt("ionInfinite",function(c){return n.onIonInfinite(c)}),e.nrm(4,"ion-infinite-scroll-content",2),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",n.posts))},dependencies:[p.Sq,s.mC,s.Jm,s.b_,s.ME,s.W9,s.iq,s.Ax,s.Hp,s.uz,s.nf,s.IO],styles:["ion-card[_ngcontent-%COMP%]{padding:5px;margin:0 0 10px}ion-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row}ion-card-header[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{display:flex}ion-card-header[_ngcontent-%COMP%]   .button-list[_ngcontent-%COMP%]{display:flex;padding:0;margin-left:auto;flex-direction:row}ion-card-header[_ngcontent-%COMP%]   .button-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-style: none;--padding-end: 0px;--inner-padding-end: 0px}ion-card-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:48px;height:48px;margin-right:10px}ion-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--ion-color-back-color)}ion-list[_ngcontent-%COMP%]   .post-list[_ngcontent-%COMP%]{display:flex;padding:0;flex-direction:row;background-color:var(--ion-color-dark-contrast)}ion-list[_ngcontent-%COMP%]   .post-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-style: none}ion-list[_ngcontent-%COMP%]   .post-list[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}ion-list[_ngcontent-%COMP%]   .post-body[_ngcontent-%COMP%]{margin:0;padding:0 16px}ion-content[_ngcontent-%COMP%]{width:100%;height:400px}"]}),a})(),xe=(()=>{var i;class a{constructor(){this.body=""}onCreatePost(t){this.body=t}ngOnInit(){}}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-user-profile"]],decls:6,vars:1,consts:[[1,"content-container"],[3,"create"],[3,"postBody"],[1,"ion-hide-xl-down"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.nrm(1,"app-profile"),e.j41(2,"div")(3,"app-post",1),e.bIt("create",function(c){return n.onCreatePost(c)}),e.k0s(),e.nrm(4,"app-all-posts",2),e.k0s(),e.nrm(5,"app-advertising",3),e.k0s()),2&t&&(e.R7$(4),e.Y8G("postBody",n.body))},dependencies:[ge,F,O,X],styles:["[_nghost-%COMP%]{display:flex;justify-content:flex-start;min-height:100vh;flex-direction:column}"]}),a})();const ke=["form"];function Pe(i,a){1&i&&(e.j41(0,"ion-text",11),e.EFF(1,"Please enter your email address."),e.k0s())}function Fe(i,a){1&i&&(e.j41(0,"ion-text",11),e.EFF(1,"Please enter your password."),e.k0s())}let ye=(()=>{var i;class a{constructor(t,n){this.authService=t,this.router=n}ngOnInit(){}onSubmit(){const{email:t,password:n}=this.form.value;this.form&&(this.authService.signIn(t,n).subscribe(()=>{this.router.navigateByUrl("/home/feed")}),this.form.reset())}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(_.u),e.rXU(h.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-welcome"]],viewQuery:function(t,n){if(1&t&&e.GBs(ke,5),2&t){let r;e.mGM(r=e.lsd())&&(n.form=r.first)}},decls:16,vars:3,consts:[["form","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"container"],[1,"home-container"],[3,"ngSubmit"],["label","Email","label-placement","floating","fill","outline","placeholder","Enter email","ngModel","","type","email","name","email","required",""],["color","danger",4,"ngIf"],["label","Password","label-placement","floating","fill","outline","placeholder","Enter password","ngModel","","type","password","name","password","required",""],["type","submit","shape","round","expand","block",3,"disabled"],["src","https://static.licdn.com/aero-v1/sc/h/dxf91zhqd2z6b0bwg85ktm5s4","alt","hero"],["color","danger"]],template:function(t,n){if(1&t){const r=e.RV6();e.j41(0,"section")(1,"div",3)(2,"div",4)(3,"h1"),e.EFF(4,"Welcome to your professional community"),e.k0s(),e.j41(5,"form",5,0),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(n.onSubmit())}),e.nrm(7,"ion-input",6,1),e.DNE(9,Pe,2,0,"ion-text",7),e.nrm(10,"ion-input",8,2),e.DNE(12,Fe,2,0,"ion-text",7),e.j41(13,"ion-button",9),e.EFF(14," Sign in "),e.k0s()()(),e.nrm(15,"img",10),e.k0s()()}if(2&t){const r=e.sdS(6),c=e.sdS(8),u=e.sdS(11);e.R7$(9),e.Y8G("ngIf",!c.valid&&c.touched),e.R7$(3),e.Y8G("ngIf",!u.valid&&u.touched),e.R7$(),e.Y8G("disabled",!r.valid)}},dependencies:[p.bT,m.qT,m.BC,m.cb,m.YS,m.vS,m.cV,s.Jm,s.$w,s.IO,s.Gw],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:35px;font-weight:200;color:var(--ion-color-title)}@media (min-width: 990px){h1[_ngcontent-%COMP%]{font-size:50px;text-align:start}}.container[_ngcontent-%COMP%]{display:flex;width:1200px;margin:90px auto 0}@media (max-width: 1200px){.container[_ngcontent-%COMP%]{width:auto;justify-content:center}}.home-containe[_ngcontent-%COMP%]{display:flex;justify-content:baseline;align-items:center}form[_ngcontent-%COMP%]{margin-top:20px}ion-input[_ngcontent-%COMP%]{margin-bottom:25px}ion-text[_ngcontent-%COMP%]{margin-bottom:25px}img[_ngcontent-%COMP%]{display:none;width:700px;height:560px;margin-left:60px}@media (min-width: 990px){img[_ngcontent-%COMP%]{display:block}}"]}),a})();var Y=d(5558);let C=(()=>{var i;class a{constructor(t,n){this.authService=t,this.router=n}canActivate(){return this.authService.isUserLoggedIn.pipe((0,k.s)(1),(0,Y.n)(t=>t?(0,v.of)(t):this.authService.isTokenInStorage()),(0,L.M)(t=>{t||this.router.navigateByUrl("/auth/login")}))}}return(i=a).\u0275fac=function(t){return new(t||i)(e.KVO(_.u),e.KVO(h.Ix))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),a})();var A=d(7669);const Me=i=>({"selected-conversation":i});function Ie(i,a){if(1&i&&(e.j41(0,"ion-badge",15),e.EFF(1),e.k0s()),2&i){const o=e.XpG().$implicit,t=e.XpG();e.R7$(),e.SpI(" ",t.getUnreadMessageCountFromFriend(o)," ")}}function Oe(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-item",11),e.bIt("click",function(){const n=e.eBV(o),r=n.$implicit,c=n.index,u=e.XpG();return e.Njj(u.selectFriend(r,c))}),e.j41(1,"ion-avatar",12),e.nrm(2,"ion-img",13),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s(),e.DNE(5,Ie,2,1,"ion-badge",14),e.k0s()}if(2&i){const o=a.$implicit,t=a.index,n=e.XpG();e.Y8G("ngClass",e.eq3(5,Me,n.selectedConversationIndex===t)),e.R7$(2),e.Y8G("src",o.imagePath),e.R7$(2),e.Lme("",o.firstName," ",o.lastName,""),e.R7$(),e.Y8G("ngIf",n.getUnreadMessageCountFromFriend(o)>0)}}function je(i,a){1&i&&(e.j41(0,"ion-item"),e.EFF(1," Your friend list is empty "),e.k0s())}function $e(i,a){if(1&i&&(e.j41(0,"ion-avatar",16),e.nrm(1,"ion-img",13),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("src",null==o.selectedFriend?null:o.selectedFriend.imagePath)}}function we(i,a){1&i&&(e.j41(0,"ion-badge",22),e.EFF(1," New "),e.k0s())}function Se(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-button",23),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,r=e.XpG();return e.Njj(r.removeMessageFromList(n.id))}),e.nrm(1,"ion-icon",24),e.k0s()}}function Ue(i,a){if(1&i&&(e.j41(0,"ion-item",17)(1,"ion-avatar",18),e.nrm(2,"ion-img",13),e.k0s(),e.j41(3,"ion-label",19),e.EFF(4),e.k0s(),e.DNE(5,we,2,0,"ion-badge",20),e.j41(6,"ion-note",9),e.EFF(7),e.nI1(8,"date"),e.k0s(),e.DNE(9,Se,2,0,"ion-button",21),e.k0s()),2&i){const o=a.$implicit,t=e.XpG();e.R7$(2),e.Y8G("src",t.defineFullImagePath(o.user)),e.R7$(2),e.JRh(o.message),e.R7$(),e.Y8G("ngIf",!o.read&&o.user.id===t.userId),e.R7$(2),e.JRh(e.i5U(8,5,o.createdDate,"short")),e.R7$(2),e.Y8G("ngIf",t.userId!==o.user.id)}}let B=(()=>{var i;class a extends g.i{constructor(t,n,r,c){super(),this.chatService=t,this.friendService=n,this.authService=r,this.route=c,this.friendList=[],this.friend$=new I.t(null),this.messages=[],this.userId=0,this.userImageUrl=null,this.unreadMessages=[],this.friendImage="",this.conversations=[],this.conversation={}}selectFriend(t,n){this.selectedFriend=t,this.selectedConversationIndex=n,this.messages=[],this.chatService.joinConversation(this.selectedFriend.id),this.setConversationForFriend(),this.fetchMessagesForFriend(),this.loadFriendImage(t.id)}sendMessage(){this.newMessage&&this.selectedFriend&&this.conversation&&(this.chatService.sendMessage(this.newMessage,this.conversation,this.selectedFriend),this.newMessage="")}setConversationForFriend(){if(this.selectedFriend&&this.userId){let t=[this.userId,this.selectedFriend.id].sort();this.conversations.forEach(n=>{var r;let c=(null!==(r=n.users)&&void 0!==r?r:[]).map(u=>u.id).sort();JSON.stringify(t)===JSON.stringify(c)&&(this.conversation=n)})}}ngOnInit(){this.authService.getUserImage().pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:t})=>{this.userImageUrl=t}),this.chatService.getUnreadMessages().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.unreadMessages=t}),this.chatService.getConversations().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.conversations.push(t[0])}),this.authService.userId.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{null!==t&&(this.userId=t)}),this.chatService.getNewMessage().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{t.createdDate=new Date,this.messages.map(r=>r.id).includes(t.id)||this.messages.push(t)}),this.friend$.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{null!==t&&this.friend.id&&this.chatService.joinConversation(this.friend.id)}),this.friendService.getAllFriends().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.friendList=t,this.handleRouteParams(),t.length>0&&(this.friend=this.friendList[0],this.friend$.next(this.friend),t.forEach(n=>{this.chatService.createConversation(n)}),this.friend.id&&this.chatService.joinConversation(this.friend.id))})}handleRouteParams(){const t=+this.route.snapshot.params.friendId;this.friendList.length>0&&(this.selectedFriend=this.friendList.find(n=>n.id===t),this.selectedFriend&&this.selectFriend(this.selectedFriend,this.friendList.indexOf(this.selectedFriend)))}fetchMessagesForFriend(){this.chatService.fetchMessages(this.conversation.id).pipe((0,l.Q)(this.unsubscribe$)).subscribe(n=>{this.messages=n,this.markMessagesAsRead()})}loadFriendImage(t){this.authService.getUserImage(t).pipe((0,l.Q)(this.unsubscribe$)).subscribe(({imageUrl:n})=>{this.friendImage=n})}getUnreadMessageCountFromFriend(t){return this.unreadMessages.filter(n=>{var r;return!n.read&&(null===(r=n.conversation)||void 0===r||null===(r=r.users)||void 0===r?void 0:r.some(c=>c.id===t.id))}).length}defineFullImagePath(t){return t?t.id===this.userId&&this.userImageUrl?this.friendImage:t.imagePath?this.userImageUrl:A.c.defaultAvatar:A.c.defaultAvatar}removeMessageFromList(t){this.chatService.onDeleteMessage(t),this.messages=this.messages.filter(n=>n.id!==t)}markMessagesAsRead(){this.chatService.markMessagesAsRead(this.conversation.id)}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(y.m),e.rXU(b),e.rXU(_.u),e.rXU(h.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-chat"]],features:[e.Vt3],decls:23,vars:7,consts:[[1,"chat-container"],["size","12","size-md","4"],[3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],["size","12","size-md","8"],["class","chat-avatar chat-avatar-with-margin",4,"ngIf"],[1,"chat-list"],["class","chat-item",4,"ngFor","ngForOf"],["placeholder","Type a message...",3,"ngModelChange","keyup.enter","ngModel"],["slot","end"],[3,"click"],[3,"click","ngClass"],["slot","start"],[3,"src"],["color","secondary","slot","end",4,"ngIf"],["color","secondary","slot","end"],[1,"chat-avatar","chat-avatar-with-margin"],[1,"chat-item"],[1,"chat-avatar"],[1,"chat-label"],["color","primary","style","margin-left: 8px",4,"ngIf"],["fill","clear","slot","end",3,"click",4,"ngIf"],["color","primary",2,"margin-left","8px"],["fill","clear","slot","end",3,"click"],["name","trash"]],template:function(t,n){1&t&&(e.j41(0,"ion-card",0)(1,"ion-content")(2,"ion-grid")(3,"ion-row")(4,"ion-col",1)(5,"ion-list"),e.DNE(6,Oe,6,7,"ion-item",2)(7,je,2,0,"ion-item",3),e.k0s()(),e.j41(8,"ion-col",4)(9,"ion-card"),e.DNE(10,$e,2,1,"ion-avatar",5),e.j41(11,"ion-card-header")(12,"ion-card-title"),e.EFF(13),e.k0s()(),e.j41(14,"ion-card-content")(15,"ion-list",6),e.DNE(16,Ue,10,8,"ion-item",7),e.k0s()(),e.j41(17,"ion-footer")(18,"ion-toolbar")(19,"ion-input",8),e.mxI("ngModelChange",function(c){return e.DH7(n.newMessage,c)||(n.newMessage=c),c}),e.bIt("keyup.enter",function(){return n.sendMessage()}),e.k0s(),e.j41(20,"ion-buttons",9)(21,"ion-button",10),e.bIt("click",function(){return n.sendMessage()}),e.EFF(22,"Send"),e.k0s()()()()()()()()()()),2&t&&(e.R7$(6),e.Y8G("ngForOf",n.friendList),e.R7$(),e.Y8G("ngIf",0===n.friendList.length),e.R7$(3),e.Y8G("ngIf",null==n.selectedFriend?null:n.selectedFriend.imagePath),e.R7$(3),e.Lme("",null==n.selectedFriend?null:n.selectedFriend.firstName," ",null==n.selectedFriend?null:n.selectedFriend.lastName,""),e.R7$(3),e.Y8G("ngForOf",n.messages),e.R7$(3),e.R50("ngModel",n.newMessage))},dependencies:[p.YU,p.Sq,p.bT,m.BC,m.vS,s.mC,s.In,s.Jm,s.QW,s.b_,s.I9,s.ME,s.tN,s.hU,s.W9,s.M0,s.lO,s.iq,s.KW,s.$w,s.uz,s.he,s.nf,s.JI,s.ln,s.ai,s.Gw,p.vh],styles:["p[_ngcontent-%COMP%]{margin:0 auto;color:#000;font-size:22px;z-index:1000}.chat-container[_ngcontent-%COMP%]{display:flex;height:calc(100% - 110px);width:1128px;box-shadow:none;border:1px solid var(--ion-color-border-color);margin:110px auto auto}.chat-container[_ngcontent-%COMP%]   .selected-conversation[_ngcontent-%COMP%]{border-left:4px solid green}@media (max-width: 1128px){.chat-container[_ngcontent-%COMP%]{width:100%}}ion-item[_ngcontent-%COMP%]{border:1px solid var(--ion-color-border-color)}ion-card-header[_ngcontent-%COMP%]{padding:2px;margin-left:30px}.chat-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px}.chat-avatar[_ngcontent-%COMP%]{width:80px;height:80px;padding:10px;flex-shrink:0;margin-right:10px}@media (max-width: 500px){.chat-avatar[_ngcontent-%COMP%]{width:60px;height:60px}}.chat-avatar-with-margin[_ngcontent-%COMP%]{margin-left:30px}ion-input[_ngcontent-%COMP%]{text-indent:10px}.chat-label[_ngcontent-%COMP%]{flex:1;font-size:14px;white-space:normal;overflow-wrap:break-word;max-width:calc(100% - 70px);margin:0}@media (max-width: 790px){.chat-label[_ngcontent-%COMP%]{font-size:12px}}"]}),a})();function Re(i,a){1&i&&e.nrm(0,"ion-icon",8)}function Ge(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-button",5),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.acceptRequest(n.id))}),e.EFF(4,"Accept"),e.k0s(),e.DNE(5,Re,1,0,"ion-icon",6),e.j41(6,"ion-button",7),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.declineRequest(n.id))}),e.EFF(7,"Decline"),e.k0s()()}if(2&i){const o=a.$implicit;e.R7$(2),e.Lme("",o.creator.firstName," ",o.creator.lastName,""),e.R7$(3),e.Y8G("ngIf","accepted"===o.status)}}function Ne(i,a){if(1&i&&(e.j41(0,"ion-list"),e.DNE(1,Ge,8,3,"ion-item",4),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.friendList)}}function Ee(i,a){1&i&&(e.j41(0,"div"),e.EFF(1," You don't have any pending friend requests. "),e.k0s())}function Te(i,a){if(1&i&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&i){const o=a.$implicit;e.R7$(),e.Lme(" You have unread messages from ",o.firstName," ",o.lastName," ")}}function Le(i,a){if(1&i&&(e.j41(0,"ion-item"),e.DNE(1,Te,2,2,"div",4),e.k0s()),2&i){const o=a.$implicit,t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.getFilteredUsers(null==o.conversation?null:o.conversation.users))}}function Ve(i,a){if(1&i&&(e.j41(0,"ion-list",9),e.DNE(1,Le,2,1,"ion-item",4),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.unreadMessages)}}let Xe=(()=>{var i;class a extends g.i{constructor(t,n){super(),this.friendService=t,this.authService=n,this.friendList=[],this.currentUserId=0,this.unreadMessages=[]}ngOnInit(){this.authService.userId.pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{null!==t&&(this.currentUserId=t)}),this.friendService.getAllRequestsFriend().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.friendList=t.filter(n=>"pending"===n.status&&n.creator.id!==this.currentUserId)})}acceptRequest(t){this.friendService.updateRequestStatus(t,"accepted").pipe((0,l.Q)(this.unsubscribe$)).subscribe(()=>{this.updateFriendList(t)})}getFilteredUsers(t){return t?t.filter(n=>n.id!==this.currentUserId):[]}declineRequest(t){this.friendService.updateRequestStatus(t,"declined").pipe((0,l.Q)(this.unsubscribe$)).subscribe(()=>{this.updateFriendList(t)})}updateFriendList(t){this.friendList=this.friendList.filter(n=>n.id!==t)}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(b),e.rXU(_.u))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-notifications"]],features:[e.Vt3],decls:6,vars:3,consts:[[1,"content-container","notification-box"],[1,"ion-hide-xl-down"],[4,"ngIf"],["class","friend-list",4,"ngIf"],[4,"ngFor","ngForOf"],["color","primary",3,"click"],["name","checkmark-circle","color","success",4,"ngIf"],["color","danger",3,"click"],["name","checkmark-circle","color","success"],[1,"friend-list"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.nrm(1,"app-profile",1),e.DNE(2,Ne,2,1,"ion-list",2)(3,Ee,2,0,"div",2)(4,Ve,2,1,"ion-list",3),e.nrm(5,"app-advertising",1),e.k0s()),2&t&&(e.R7$(2),e.Y8G("ngIf",n.friendList.length>0),e.R7$(),e.Y8G("ngIf",0===n.friendList.length),e.R7$(),e.Y8G("ngIf",n.unreadMessages.length>0))},dependencies:[p.Sq,p.bT,s.Jm,s.iq,s.uz,s.he,s.nf,F,O],styles:[".notification-box[_ngcontent-%COMP%]{display:flex;justify-content:space-around}ion-button[_ngcontent-%COMP%]{margin-left:10px}ion-label[_ngcontent-%COMP%]{flex-grow:1}.content-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:20px}.friend-list[_ngcontent-%COMP%]{margin-top:20px;--ion-item-background: var(--ion-color-back-color)}"]}),a})();const Ye=i=>["/home/friend-profile",i];function Ae(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-list")(1,"ion-item",12),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,r=e.XpG();return e.Njj(r.removeConnection(n.id))}),e.EFF(2,"Remove Connection"),e.k0s()()}}function Be(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-item")(1,"ion-avatar",7),e.nrm(2,"img",8),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s(),e.j41(5,"ion-button",9),e.bIt("click",function(){const n=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.joinConversation(n.id))}),e.EFF(6,"Message"),e.k0s(),e.j41(7,"ion-icon",10),e.bIt("click",function(n){e.eBV(o);const r=e.XpG();return e.Njj(r.presentPopover(n))}),e.k0s(),e.j41(8,"ion-popover",11),e.bIt("ionPopoverDidDismiss",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.closePopover())}),e.DNE(9,Ae,3,0,"ng-template"),e.k0s()()}if(2&i){const o=a.$implicit,t=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(6,Ye,o.id)),e.R7$(),e.Y8G("src",o.imagePath,e.B4B),e.R7$(2),e.Lme("",o.firstName," ",o.lastName,""),e.R7$(4),e.Y8G("isOpen",t.isPopoverOpen)("event",t.popoverEvent)}}function Qe(i,a){1&i&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2,"No friends in your network"),e.k0s()())}const De=[{path:"",component:he,children:[{path:"",component:ye,canActivate:[(()=>{var i;class a{constructor(t,n){this.authService=t,this.router=n}canActivate(){return this.authService.isUserLoggedIn.pipe((0,k.s)(1),(0,Y.n)(t=>t?(this.router.navigate(["/home/feed"]),(0,v.of)(!1)):(0,v.of)(!0)))}}return(i=a).\u0275fac=function(t){return new(t||i)(e.KVO(_.u),e.KVO(h.Ix))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),a})()]},{path:"chat",component:B,canActivate:[C]},{path:"chat/:friendId",component:B,canActivate:[C]},{path:"feed",component:xe,canActivate:[C]},{path:"notifications",component:Xe,canActivate:[C]},{path:"networks",component:(()=>{var i;class a extends g.i{constructor(t,n){super(),this.friendService=t,this.router=n,this.friendList=[],this.isPopoverOpen=!1}ngOnInit(){this.friendService.getAllFriends().pipe((0,l.Q)(this.unsubscribe$)).subscribe(t=>{this.friendList=t})}joinConversation(t){this.router.navigate([`/home/chat/${t}`])}presentPopover(t){this.isPopoverOpen=!0,this.popoverEvent=t}closePopover(){this.isPopoverOpen=!1}removeConnection(t){this.friendService.deleteFriend(t).pipe((0,l.Q)(this.unsubscribe$)).subscribe(()=>{this.friendList=this.friendList.filter(({id:n})=>n!==t),this.closePopover()})}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(b),e.rXU(h.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-my-network"]],features:[e.Vt3],decls:10,vars:2,consts:[[1,"content-container","network-box"],[1,"network-grid"],["size","12","size-md","5","size-lg","6"],[4,"ngFor","ngForOf"],[4,"ngIf"],["size","12","size-md","7","size-lg","6",1,"ion-hide-md-down","ion-align-self-end"],[1,"ion-hide-md-down"],["slot","start",3,"routerLink"],["alt","Profile Picture",3,"src"],["color","primary",3,"click"],["name","ellipsis-horizontal","slot","end",3,"click"],["cssClass","network-popover",3,"ionPopoverDidDismiss","isOpen","event"],["button","",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content")(1,"div",0)(2,"ion-grid",1)(3,"ion-row")(4,"ion-col",2)(5,"ion-list"),e.DNE(6,Be,10,8,"ion-item",3)(7,Qe,3,0,"ion-item",4),e.k0s()(),e.j41(8,"ion-col",5),e.nrm(9,"app-advertising",6),e.k0s()()()()()),2&t&&(e.R7$(6),e.Y8G("ngForOf",n.friendList),e.R7$(),e.Y8G("ngIf",0===n.friendList.length))},dependencies:[p.Sq,p.bT,s.mC,s.Jm,s.hU,s.W9,s.lO,s.iq,s.uz,s.he,s.nf,s.ln,s.CF,s.N7,h.Wk,F],styles:[".network-grid[_ngcontent-%COMP%]{width:100%}.network-popover[_ngcontent-%COMP%]::part(backdrop){background:transparent}.network-box[_ngcontent-%COMP%]{border:1px solid var(--ion-color-border-color);display:flex;justify-content:space-between}ion-content[_ngcontent-%COMP%]{--ion-background-color: var(--ion-color-back-color)}.ion-align-self-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),a})(),canActivate:[C]},{path:"friend-profile/:id",component:(()=>{var i;class a extends g.i{constructor(t,n,r){super(),this.route=t,this.postService=n,this.friendService=r,this.friendId=0,this.numberOfPosts=5,this.skipPosts=0}ngOnInit(){this.friendId=+this.route.snapshot.paramMap.get("id"),this.loadFriendProfile(this.friendId)}loadFriendProfile(t){this.queryParams=`?take=${this.numberOfPosts}&skip=${this.skipPosts}`,this.postService.getAllPosts(this.queryParams).pipe((0,l.Q)(this.unsubscribe$)).subscribe(),this.friendId&&this.friendService.getFriendById(this.friendId).pipe((0,l.Q)(this.unsubscribe$)).subscribe(n=>{this.friend=n})}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(h.nX),e.rXU(V),e.rXU(b))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-friend-profile"]],features:[e.Vt3],decls:5,vars:2,consts:[[1,"content-container"],[3,"user"],[1,"post-container"],[3,"userId"],[1,"ion-hide-xl-down"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.nrm(1,"app-profile",1),e.j41(2,"div",2),e.nrm(3,"app-all-posts",3),e.k0s(),e.nrm(4,"app-advertising",4),e.k0s()),2&t&&(e.R7$(),e.Y8G("user",n.friend),e.R7$(2),e.Y8G("userId",n.friendId))},dependencies:[F,O,X],styles:[".post-container[_ngcontent-%COMP%]{width:500px;max-width:100%;margin-top:10px}"]}),a})(),canActivate:[C]}]}];let Je=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.iI.forChild(De),h.iI]}),a})(),ze=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[p.MD,m.YN,s.bv,Je]}),a})()}}]);